<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>客房服务</title>

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="noindex" />
    <link href="../css/selfService.css" rel="stylesheet" /> 
    <script src="../js/jquery.min.js"></script>
     <script type="text/javascript">
         function getGuestList() {
             var sReceiveId = "";
             $.ajax({
                 type: "GET",
                 url: "/SelfService/Home",
                 dataType: "json",
                 success: function (data) {
                     console.log(data);
                     if (data.ResultType == 0 && null != data.obj && data.obj.list.length > 0) {
                         var html = "";
                         //是会员的情况，续住与退房可见
                         var list = data.obj.list;
                         for (var i = 0; i < list.length; i++) {
                             var item = list[i];
                             var level = item.MemberLevelID;
                             var li = "<li class=\"member_" + itemLeve(level) + "\">"
                                 + "<div class=\"member_base\">"
                                 + "<h4 class=\"name\">" + filterItem(item.Name) + "</h4>"
                                 + "<div class=\"level myhzIcon " + itemLeve(level) + "\" >" + filterItem(item.MemberLevelDesc) + "</div>"
                                 + "<div class=\"clearfix\"></div>"
                                 + "</div>"
                                 + "<p class=\"phone_" + itemLeve(level) + " myhzIcon\">" + filterItem(item.Mobile) + "</p>"
                                 + "<p class=\"idNumber_" + itemLeve(level) + " myhzIcon\">" + filterItem(item.idCode) + "</p>"
                                 + "<p class=\"points_" + itemLeve(level) + " myhzIcon\">" + filterItem(item.Point) + "</p>"
                                 + "</li>";

                             html += li;
                             if (sReceiveId == "") {
                                 sReceiveId = item.ReceiveID;
                             }
                         }

                         if (null != data.obj.memberList && data.obj.memberList.length > 0) {
                             var firstMember = data.obj.memberList[0];
                             $('#aCheckOut').attr("href", "/SelfService/Out");
                             $('#aContinued').attr("href", "/SelfService/Live");
                         }

                         $('#ulGuestList').html(html);
                     }

                 }
             });
         }

         function itemLeve(level) {
             var levelStr = "";
             if (level == "A") {
                 levelStr = "silver";
             } else if (level == "B") {
                 levelStr = "gold";
             } else if (level == "I") {
                 levelStr = "pt";
             } else if (level == "P") {
                 levelStr = "star";
             } else {
                 levelStr = "non";
             }
             return levelStr;
         }

         function filterItem(data) {
             var item = "";
             if (data) {
                 item = data;
             } else {
                 item = "&nbsp;";
             }
             return item;
         }

         getGuestList();

         function checkOut(sReceiveId) {
             $.ajax({
                 type: "GET",
                 url: "/SelfService/SupportCheckOut?sReceiveID=" + sReceiveId,
                 dataType: "json",
                 success: function (data) {
                     if (data.ResultType == 0) {
                         window.location.href = "/SelfService/Live";
                     } else {
                         alert(data.Message);
                     }

                 }
             });
         }

         function keyEvent(keyCode) {
             console.log("keyCode--" + keyCode);
             alert(keyCode);
         }
         $(document).keydown(function (event) {
             console.log("docuemtn --keyCode--" + event.keyCode);
             alert(event.keyCode);
         });
    </script>
</head>
    <body class="myhz">
        <div style="color: white;font-size: 50px;font-family: 微软雅黑;text-align: center;font-weight: 600">客房服务</div>
        <ul  class="clearfix" id="ulGuestList">
        </ul>


        <div style="position: fixed; bottom: 0; margin-bottom: 160px; text-align: center; width: 100%">
            <p class="btn btn-blue"><a  id="aContinued" href="#">续住</a> <a id="aCheckOut" href="#">退房</a></p>
        </div>
 

    </body>
</html>
